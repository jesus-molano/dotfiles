# --- CATPPUCCIN MOCHA THEME ---
source = ~/.config/hypr/mocha.conf

################
### MONITORS ###
################
# --- MONITOR ---
monitor=HDMI-A-2,1920x1080@74.97,0x0,1,bitdepth,10
monitor=HDMI-A-1,1920x1080@74.97,1920x0,1,bitdepth,10

# --- ENV VARS (CR√çTICO PARA NVIDIA) ---
env = LIBVA_DRIVER_NAME,nvidia
env = XDG_SESSION_TYPE,wayland
env = GBM_BACKEND,nvidia-drm
env = __GLX_VENDOR_LIBRARY_NAME,nvidia
env = NVD_BACKEND,direct
env = ELECTRON_OZONE_PLATFORM_HINT,auto

# --- CURSOR THEME ---
env = XCURSOR_THEME,catppuccin-mocha-dark-cursors
env = XCURSOR_SIZE,24
env = HYPRCURSOR_THEME,catppuccin-mocha-dark-cursors
env = HYPRCURSOR_SIZE,24

# --- QT THEMING ---
env = QT_QPA_PLATFORMTHEME,qt5ct
env = QT_STYLE_OVERRIDE,kvantum

# --- AUTOSTART ---
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = /usr/lib/polkit-kde-authentication-agent-1
exec-once = waybar & swww-daemon & swaync
exec-once = ~/.config/hypr/scripts/reactive-rgb.sh &
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store
exec-once = kanata -c ~/.config/kanata/config.kbd # Aseguramos Kanata

# --- INPUT ---
input {
    kb_layout = us,es
    kb_options = grp:win_space_toggle
    follow_mouse = 1
    sensitivity = 0
    repeat_rate = 50
    repeat_delay = 300
}

# --- GENERAL ---
general {
    gaps_in = 4
    gaps_out = 8
    border_size = 2
    col.active_border = $mauve $blue 45deg
    col.inactive_border = $surface0
    layout = dwindle
    allow_tearing = true
}

decoration {
    rounding = 10
    blur {
        enabled = true
        size = 5
        passes = 2
	ignore_opacity = true
	new_optimizations = true
    }
}

animations {
    enabled = yes
    bezier = md3_decel, 0.05, 0.7, 0.1, 1
    animation = windows, 1, 3, md3_decel, popin 60%
    animation = workspaces, 1, 3, md3_decel, slide
}

dwindle {
    pseudotile = yes
    preserve_split = yes
    smart_split = no # Prefiero control manual
}

# --- VARIABLES ---
$mainMod = ALT
$hyper = CTRL ALT SUPER SHIFT

# --- BINDS ---
# Cambio de idioma: ALT + CTRL + SPACE
bind = $mainMod CTRL, SPACE, exec, hyprctl switchxkblayout all next

# Apps
bind = $mainMod, SPACE, exec, ~/.config/rofi/launchers/type-1/launcher.sh
bind = $hyper, RETURN, exec, kitty
bind = $hyper, B, exec, google-chrome-stable
bind = $hyper, E, exec, kitty -e yazi
bind = $hyper, C, exec, webstorm # IDE
bind = $hyper, N, exec, swaync-client -t -sw
bind = $hyper, P, exec, hyprpicker -a
bind = $hyper, M, exec, mangohudctl toggle

# Window Management (VIM HJKL)
bind = $mainMod, W, killactive
bind = $mainMod, h, movefocus, l
bind = $mainMod, l, movefocus, r
bind = $mainMod, k, movefocus, u
bind = $mainMod, j, movefocus, d

bind = $mainMod SHIFT, h, movewindow, l
bind = $mainMod SHIFT, l, movewindow, r
bind = $mainMod SHIFT, k, movewindow, u
bind = $mainMod SHIFT, j, movewindow, d

# Resize
binde = $mainMod CTRL, l, resizeactive, 40 0
binde = $mainMod CTRL, h, resizeactive, -40 0
binde = $mainMod CTRL, k, resizeactive, 0 -40
binde = $mainMod CTRL, j, resizeactive, 0 40

# Mouse bindings
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# Workspaces
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6

bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6

bind = $mainMod, M, fullscreen
bind = $mainMod, F, togglefloating
bind = $mainMod, C, exec, ~/.config/hypr/scripts/super-copy.sh
bind = $mainMod, V, exec, ~/.config/hypr/scripts/super-paste.sh
bind = $mainMod SHIFT, V, exec, cliphist list | rofi -dmenu -p "Clipboard" -theme ~/.config/rofi/launchers/type-1/style-2.rasi | cliphist decode | wl-copy
bind = $mainMod, A, exec, ~/.config/hypr/scripts/audio-toggle.sh

# --- üì∏ SCREENSHOTS ---
bind = $hyper, S, exec, grim -g "$(slurp)" - | swappy -f -

# --- üéÆ GAMING (Baja Latencia) ---
# Nueva sintaxis: match:class + immediate 1
windowrule = match:class ^(cs2)$, immediate 1
windowrule = match:class ^(steam_app_\d+)$, immediate 1

# --- üéà FLOTANTES ---
# Nueva sintaxis: match:class + float 1
windowrule = match:class ^(pavucontrol)$, float 1
windowrule = match:class ^(swappy)$, float 1
windowrule = match:class ^(org.kde.polkit-kde-authentication-agent-1)$, float 1

windowrule = match:class ^(org.coolercontrol.CoolerControl)$, float 1
windowrule = match:class ^(org.coolercontrol.CoolerControl)$, size 1100 700
windowrule = match:class ^(org.coolercontrol.CoolerControl)$, center 1

windowrule = match:class ^(openrgb)$, float 1
windowrule = match:class ^(openrgb)$, size 1000 650
windowrule = match:class ^(openrgb)$, center 1

# --- üñºÔ∏è PICTURE-IN-PICTURE ---
windowrule = match:title ^(Picture-in-Picture)$, float 1
windowrule = match:title ^(Picture-in-Picture)$, pin 1
windowrule = match:title ^(Picture-in-Picture)$, move 100%-w-10 100%-h-10
